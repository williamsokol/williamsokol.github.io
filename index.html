<!DocType html>
<html>
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z3LL6HLS1X"></script>
		<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-Z3LL6HLS1X');
		</script>

		<!--End of Global site tag (gtag.js) - Google Analytics -->

		<title>William's Website</title>
		<link rel="stylesheet" type="text/css" href="css/style.css">
		<!--		
		<script type="text/javascript" src="JsScripts/PostLoader.js"></script>
		-->
		<script src="https://apis.google.com/js/api.js"></script>
		<script type="text/javascript" src="/JsScripts/DriveArticles.js"></script>
		
	</head>
	<body>
		

		<header>
			<div class="main">
				
			<ul>
				
				<li><a href = "Pages/Tools.html"> Tools </a></li>
				<li><a href = "Pages/AI.html"> My AI's </a></li>
				<li><a href = "Pages/Logs.html"> Logs </a></li>
				<li><a href = "Pages/GamesList.html"> My Games </a></li>
				<li><a href = "Pages/About.html"> About </a></li>
				<li><a href = "Pages/Contact.html"> Contact </a></li>
				
			</ul>
			
			</div>

			<div class="title">
				<h1>William Sokol's Website</h1>
			</div>	

			<div class="logo">
				<img src="/Images/logo.gif" >
			</div>		
		</header>

		<div class="things">
			<div class="spacer">
				<div class="box" id="LatestPost">
				</div>
			</div>

			<div class="spacer">
				<div class="box" id="RandPost">
				</div>
			</div>
		</div>



		<footer>footer</footer>


		<script>
        //var i;
        //var htmlstring;
        //var dothtmls;
        //thing = new Array;
        
		document.addEventListener("googleLoggedin", function(e){
            var test = initArticles();
        });
        
        function initArticles() {
            gapi.client.drive.files.list({
                'q' : "'1STx7_sT-bQI9v_ZH3ui6ksc6Lc0VbkQE' in parents",
                "fields" : "files/webViewLink , files/name, files/id"
            })
            .then(function(response) {
               
                createList(response)
            },
            function(err) { console.error("Execute error", err); });
        }

        function createList(response)
        {
			
			r = Math.floor(Math.random() * response.result.files.length);
            
			
            DisplayPost(response.result.files[0].id, response.result.files[0].name);
			//DisplayPost(thing[0].postlist,thing[0].posttimes);
			RandomPost(response.result.files[r].id, response.result.files[r].name);
        }

        function DisplayPost(id,name){
            var postURL = "https://docs.google.com/document/d/"+id+"/pub"
            var newPost = document.getElementById("LatestPost"); 
			console.log (newPost);
            //newpost.innerHTML = '<div class="box"><h1 >'+ name +'<a href="javascript:fetchHTMLPage(`'+id+'`);">go to page</a></h1><hr/><iframe name= '+id+' src='+postURL+'?embedded=true ></iframe></div>';
            newPost.innerHTML = '<div class="box"><h1 > Latest Article <a href="javascript:GoToPage(`'+id+'`,`'+name+'`)">go to page</a></h1><hr/><iframe name= '+id+' src='+postURL+'?embedded=true ></iframe></div>';
   
        }
		function RandomPost(id,name){  
			var postURL = "https://docs.google.com/document/d/"+id+"/pub"
			var newPost = document.getElementById("RandPost");
            
			console.log (newPost);
            //newpost.innerHTML = '<div class="box"><h1 >'+ name +'<a href="javascript:fetchHTMLPage(`'+id+'`);">go to page</a></h1><hr/><iframe name= '+id+' src='+postURL+'?embedded=true ></iframe></div>';
            newPost.innerHTML = '<div class="box"><h1 > Random Article! <a href="javascript:GoToPage(`'+id+'`,`'+name+'`)">go to page</a></h1><hr/><iframe name= '+id+' src='+postURL+'?embedded=true ></iframe></div>';
   

            //newPost.innerHTML = '<h1 >Random Thing!<a href="logpost/'+ postname +'">go to page</a></h1><hr/><iframe src="logpost/'+ postname +'" ></iframe>';
        }
    </script>


	</body>
</html>
